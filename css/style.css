/* css/style.css */
:root {
    --deep-lagoon: #0a192f;
    --sunlit-shallows: #64ffda;
    --pearl: #ccd6f6;
    --pearl-muted: #8892b0;
    --volcanic-glass: rgba(25, 45, 65, 0.7);
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}
html { box-sizing: border-box; font-size: 16px; height: 100%; }
*, *:before, *:after { box-sizing: inherit; }
body { margin: 0; padding: 0; width: 100%; height: 100%; background-color: var(--deep-lagoon); font-family: var(--font-sans); color: var(--pearl); overflow: hidden; overscroll-behavior-y: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background: linear-gradient(-45deg, #0a192f, #0f2140, #0a192f, #112a4a); background-size: 400% 400%; animation: gradient-flow 15s ease-in-out infinite; }
@keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
#map { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
.leaflet-tile-pane { }
/* .leaflet-control-zoom { display: none; } -- PALETTE UX: Restored zoom controls (UX-003) */
.leaflet-marker-icon.custom-marker { border-radius: 50%; background-color: rgba(100, 255, 218, 0.8); border: 2px solid var(--sunlit-shallows); box-shadow: 0 0 15px var(--sunlit-shallows); transition: transform 0.3s ease-in-out; }
.leaflet-marker-icon.custom-marker::before { content: ''; position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; border-radius: 50%; background-color: var(--sunlit-shallows); animation: pulse 2s infinite; z-index: -1; transform-origin: center; }
.leaflet-marker-icon.custom-marker.active { transform: scale(1.5); box-shadow: 0 0 25px var(--sunlit-shallows), 0 0 35px var(--sunlit-shallows); }
/* PALETTE UX: Styled tooltips for markers */
.leaflet-tooltip.custom-tooltip { background-color: var(--deep-lagoon); border: 1px solid var(--sunlit-shallows); color: var(--sunlit-shallows); font-family: var(--font-sans); box-shadow: 0 4px 10px rgba(0,0,0,0.5); font-size: 0.8rem; padding: 0.25rem 0.5rem; border-radius: 4px; }
.leaflet-tooltip-top:before { border-top-color: var(--sunlit-shallows); }
@keyframes pulse { 0% { transform: scale(0.9); opacity: 0.7; } 70% { transform: scale(2.5); opacity: 0; } 100% { transform: scale(0.9); opacity: 0; } }
.ui-container { position: absolute; z-index: 10; padding: 1.5rem; pointer-events: none; }
.ui-container > * { pointer-events: auto; }
#header { top: 0; left: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; }
#header h1 { font-size: 1.75rem; font-weight: 500; color: var(--pearl); margin: 0; letter-spacing: 0.5px; }
#island-selector { display: flex; gap: 1.5rem; }
.island-btn { background: none; border: none; color: var(--pearl-muted); font-family: var(--font-sans); font-size: 1rem; cursor: pointer; transition: color 0.3s ease, transform 0.3s ease; position: relative; padding: 0.5rem 0; user-select: none; -webkit-user-select: none; }
.island-btn::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background-color: var(--sunlit-shallows); transform: scaleX(0); transform-origin: right; transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); }
.island-btn:hover, .island-btn.active { color: var(--sunlit-shallows); transform: translateY(-2px); }
.island-btn.active::after { transform: scaleX(1); transform-origin: left; }
/* PALETTE UX: Focus ring for keyboard accessibility */
.island-btn:focus-visible { outline: none; }
.island-btn::before {
    content: '';
    position: absolute;
    top: -4px; bottom: -4px; left: -8px; right: -8px;
    border: 1px dashed var(--sunlit-shallows);
    border-radius: 4px;
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.2s ease;
    pointer-events: none;
}
.island-btn:focus-visible::before { opacity: 1; transform: scale(1); }
#attraction-dock-wrapper { bottom: 0; left: 0; width: 100%; }
#attraction-dock { display: flex; gap: 1rem; overflow-x: auto; padding: 1.5rem; padding-top: 1rem; -ms-overflow-style: none; scrollbar-width: none; scroll-behavior: smooth; scroll-snap-type: x mandatory; /* For keyboard nav */ }
#attraction-dock::-webkit-scrollbar { display: none; }
/* MITIGATION FOR B-004: Styling a <button> instead of a <div> */
/* PERF-001: Removed backdrop-filter default, applied via @supports for capable devices */
.attraction-card { flex: 0 0 320px; padding: 1.5rem; background: var(--volcanic-glass); border: 1px solid rgba(100, 255, 218, 0.1); border-radius: 12px; transition: transform 0.4s ease, box-shadow 0.4s ease; cursor: pointer; text-align: left; font-family: var(--font-sans); scroll-snap-align: center; user-select: none; -webkit-user-select: none; animation: slideUpFade 0.5s ease backwards; }
@supports (backdrop-filter: blur(10px)) {
    .attraction-card { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
}
.attraction-card:hover { transform: translateY(-10px); box-shadow: 0 10px 30px -15px rgba(0,0,0,0.7); }
.attraction-card.active, .attraction-card:focus-visible { transform: translateY(-10px) scale(1.05); box-shadow: 0 0 20px -5px var(--sunlit-shallows); border-color: var(--sunlit-shallows); outline: none; }
.attraction-card .card-title { display: block; margin: 0 0 0.5rem 0; font-size: 1.25rem; font-weight: 500; color: var(--pearl); pointer-events: none; /* Allow click on child */ }
.attraction-card .card-desc { display: block; margin: 0; font-size: 0.95rem; color: var(--pearl-muted); line-height: 1.5; pointer-events: none; /* Allow click on child */ }
/* Legacy support if needed */
.attraction-card h3, .attraction-card h2 { margin: 0 0 0.5rem 0; font-size: 1.25rem; font-weight: 500; color: var(--pearl); pointer-events: none; }
.attraction-card p { margin: 0; font-size: 0.95rem; color: var(--pearl-muted); line-height: 1.5; pointer-events: none; }

#welcome-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--deep-lagoon); z-index: 1000; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease-in-out 0.5s; cursor: pointer; }
#welcome-overlay.hidden { opacity: 0; pointer-events: none; }
.typewriter h1 { font-size: 3rem; font-weight: 300; color: var(--pearl); overflow: hidden; border-right: .15em solid var(--sunlit-shallows); white-space: nowrap; margin: 0 auto; letter-spacing: .1em; animation: typing 2.5s steps(30, end), blink-caret .75s step-end infinite; }
@keyframes typing { from { width: 0 } to { width: 100% } }
@keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: var(--sunlit-shallows); } }
@keyframes slideUpFade { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
/* PALETTE UX: Skip link for keyboard accessibility */
.skip-link { position: absolute; top: 0; left: 1rem; transform: translateY(-150%); padding: 0.75rem 1.25rem; background: var(--deep-lagoon); color: var(--sunlit-shallows); border: 1px solid var(--sunlit-shallows); border-radius: 0 0 4px 4px; z-index: 2000; text-decoration: none; font-weight: 500; transition: transform 0.3s ease; }
.skip-link:focus { transform: translateY(0); outline: none; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
/* PALETTE UX: Utility for screen reader only content */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
#header:focus { outline: none; }
@media (max-width: 768px) { #header { flex-direction: column; align-items: flex-start; gap: 1rem; } #header h1 { font-size: 1.5rem; } .island-btn { font-size: 0.9rem; } #island-selector { gap: 1rem; } .attraction-card { flex-basis: 280px; } .typewriter h1 { font-size: 1.8rem; } }
/* PALETTE UX: Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    body { animation: none; background-position: 50% 50%; }
    .leaflet-marker-icon.custom-marker::before { animation: none; opacity: 0.3; transform: scale(1); }
    #welcome-overlay, .island-btn, .attraction-card, .skip-link, .leaflet-marker-icon.custom-marker { transition: none; }
}

/* PALETTE UX: Guided Tour Styles */
.tour-btn { border: 1px solid var(--sunlit-shallows); border-radius: 4px; padding: 0.25rem 0.75rem; margin-left: 0; background: rgba(100, 255, 218, 0.1); }
.tour-btn:hover { background: rgba(100, 255, 218, 0.2); }
#tour-controls { position: absolute; top: 5rem; right: 1.5rem; width: 320px; max-width: 90vw; background: var(--volcanic-glass); border: 1px solid var(--sunlit-shallows); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 500; transition: opacity 0.3s ease, transform 0.3s ease; opacity: 1; transform: translateY(0); }
@supports (backdrop-filter: blur(10px)) { #tour-controls { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); } }
#tour-controls.hidden { opacity: 0; transform: translateY(-20px); pointer-events: none; }
#tour-controls h2 { color: var(--sunlit-shallows); font-size: 1.25rem; margin-top: 0; }
#tour-controls p { color: var(--pearl); line-height: 1.6; margin-bottom: 1.5rem; }
.tour-actions { display: flex; justify-content: space-between; }
.tour-actions .island-btn { border: 1px solid var(--pearl-muted); border-radius: 4px; padding: 0.25rem 0.75rem; }
.tour-actions .island-btn:hover { border-color: var(--sunlit-shallows); }
